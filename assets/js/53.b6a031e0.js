(window.webpackJsonp=window.webpackJsonp||[]).push([[53],{486:function(s,a,t){"use strict";t.r(a);var r=t(18),e=Object(r.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"mysql-1251-问题"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mysql-1251-问题"}},[s._v("#")]),s._v(" mysql 1251 问题")]),s._v(" "),t("h3",{attrs:{id:"原因"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#原因"}},[s._v("#")]),s._v(" "),t("font",{attrs:{color:"#3498db"}},[s._v("原因")])],1),s._v(" "),t("p",[s._v("mysql8.0 默认使用caching_sha2_password身份验证机制；\n本地客户端不支持新的加密方式")]),s._v(" "),t("h3",{attrs:{id:"解决方案-二选一"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#解决方案-二选一"}},[s._v("#")]),s._v(" "),t("font",{attrs:{color:"#3498db"}},[s._v("解决方案 二选一")])],1),s._v(" "),t("h4",{attrs:{id:"一、升级本地客户端"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#一、升级本地客户端"}},[s._v("#")]),s._v(" "),t("font",{attrs:{color:"#4ecb52"}},[s._v("一、升级本地客户端")])],1),s._v(" "),t("p",[s._v("将本地客户端升至新版")]),s._v(" "),t("h4",{attrs:{id:"二、修改加密方式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#二、修改加密方式"}},[s._v("#")]),s._v(" "),t("font",{attrs:{color:"#4ecb52"}},[s._v("二、修改加密方式")])],1),s._v(" "),t("p",[t("font",{attrs:{color:"#f1c40f"}},[s._v("• 1、进入MySQL容器内部")])],1),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker exec -it mysql02 bash")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[t("font",{attrs:{color:"#f1c40f"}},[s._v("• 2、登录MySQL")])],1),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("root@f712a2f0c808:/"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# mysql -u root -p")]),s._v("\nEnter password:\n\nWelcome to the MySQL monitor.  Commands end with "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" or "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("g.\nYour MySQL connection "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("id")]),s._v(" is "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v("\nServer version: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8.0")]),s._v(".20 MySQL Community Server - GPL\n\nCopyright "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("c"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2000")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v(", Oracle and/or its affiliates. All rights reserved.\n\nOracle is a registered trademark of Oracle Corporation and/or its\naffiliates. Other names may be trademarks of their respective\nowners.\n\nType "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'help;'")]),s._v(" or "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'\\h'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" help. Type "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'"),t("span",{pre:!0,attrs:{class:"token entity",title:"\\c"}},[s._v("\\c")]),s._v("'")]),s._v(" to "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("clear")]),s._v(" the current input statement.\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br")])]),t("p",[t("font",{attrs:{color:"#f1c40f"}},[s._v("• 3、设置用户配置项")])],1),s._v(" "),t("p",[t("font",{attrs:{color:"#7bed9f"}},[s._v("○ 1）查看用户信息")])],1),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("mysql"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" host,user,plugin,authentication_string from mysql.user"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n+-----------+------------------+-----------------------+------------------------------------------------------------------------+\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("host")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" user             "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" plugin                "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" authentication_string                                                  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n+-----------+------------------+-----------------------+------------------------------------------------------------------------+\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" %         "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" root             "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" caching_sha2_password "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$A")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$005")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$*")]),s._v("_2ak \n                                                                     vrJPz2OKCdweq5bb0a9sQk.pFfqUGp8rJIT/jcSCT/1eDZesf6GgO. "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" localhost "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" mysql.infoschema "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" caching_sha2_password "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$A")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$005")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$THISISACOMBINATIONOFINVALIDSALTANDPASSWORDTHATMUSTNEVERBRBEUSED")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" localhost "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" mysql.session    "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" caching_sha2_password "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$A")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$005")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$THISISACOMBINATIONOFINVALIDSALTANDPASSWORDTHATMUSTNEVERBRBEUSED")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" localhost "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" mysql.sys        "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" caching_sha2_password "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$A")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$005")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$THISISACOMBINATIONOFINVALIDSALTANDPASSWORDTHATMUSTNEVERBRBEUSED")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" localhost "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" root             "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" caching_sha2_password "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$A")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$005")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$9a5")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("Y"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("d"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("N2R/yuyOpm9d1v2/7rHbDON29T.YNdyxfITFD7JQ1TVfwFj80 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n+-----------+------------------+-----------------------+------------------------------------------------------------------------+\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" rows "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.01")]),s._v(" sec"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br")])]),t("blockquote",[t("p",[s._v("备注：host为 % 表示不限制ip localhost表示本机使用 plugin非mysql_native_password 则需要修改密码")])]),s._v(" "),t("p",[t("font",{attrs:{color:"#7bed9f"}},[s._v("○ 2）修改加密方式")])],1),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("mysql"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" ALTER "),t("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("USER")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'root'")]),s._v("@"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'%'")]),s._v(" IDENTIFIED WITH mysql_native_password BY "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'root'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nQuery OK, "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" rows affected "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.01")]),s._v(" sec"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("查看用户信息")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("mysql"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" host,user,plugin,authentication_string from mysql.user"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n+-----------+------------------+-----------------------+------------------------------------------------------------------------+\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("host")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" user             "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" plugin                "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" authentication_string                                                  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n+-----------+------------------+-----------------------+------------------------------------------------------------------------+\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" %         "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" root             "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" mysql_native_password "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" *81F5E21E35407D884A6CD4A731AEBFB6AF209E1B                              "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" localhost "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" mysql.infoschema "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" caching_sha2_password "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$A")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$005")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$THISISACOMBINATIONOFINVALIDSALTANDPASSWORDTHATMUSTNEVERBRBEUSED")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" localhost "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" mysql.session    "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" caching_sha2_password "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$A")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$005")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$THISISACOMBINATIONOFINVALIDSALTANDPASSWORDTHATMUSTNEVERBRBEUSED")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" localhost "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" mysql.sys        "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" caching_sha2_password "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$A")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$005")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$THISISACOMBINATIONOFINVALIDSALTANDPASSWORDTHATMUSTNEVERBRBEUSED")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" localhost "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" root             "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" caching_sha2_password "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$A")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$005")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$9a5")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("Y"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("d"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("N2R/yuyOpm9d1v2/7rHbDON29T.YNdyxfITFD7JQ1TVfwFj80 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n+-----------+------------------+-----------------------+------------------------------------------------------------------------+\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" rows "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00")]),s._v(" sec"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])]),t("blockquote",[t("p",[s._v("我们可以看到 root 的 host 为 %")])])])}),[],!1,null,null,null);a.default=e.exports}}]);